<template>
  <div class="share">
    <!-- TODO 需要确定接入那些分享平台，以及确定需要凭证的平台 -->
    <!-- <div v-if="false" class="share-list">
      <svg
        t="1723530635467"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="1633"
        width="32"
        height="32"
      >
        <path
          d="M824.8 613.2c-16-51.4-34.4-94.6-62.7-165.3C766.5 262.2 689.3 112 511.5 112 331.7 112 256.2 265.2 261 447.9c-28.4 70.8-46.7 113.7-62.7 165.3-34 109.5-23 154.8-14.6 155.8 18 2.2 70.1-82.4 70.1-82.4 0 49 25.2 112.9 79.8 159-26.4 8.1-85.7 29.9-71.6 53.8 11.4 19.3 196.2 12.3 249.5 6.3 53.3 6 238.1 13 249.5-6.3 14.1-23.8-45.3-45.7-71.6-53.8 54.6-46.2 79.8-110.1 79.8-159 0 0 52.1 84.6 70.1 82.4 8.5-1.1 19.5-46.4-14.5-155.8z"
          p-id="1634"
          fill="#ffffff"
        ></path>
      </svg>
      <svg
        t="1723530657724"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="2831"
        width="32"
        height="32"
      >
        <path
          d="M664.250054 368.541681c10.015098 0 19.892049 0.732687 29.67281 1.795902-26.647917-122.810047-159.358451-214.077703-310.826188-214.077703-169.353083 0-308.085774 114.232694-308.085774 259.274068 0 83.708494 46.165436 152.460344 123.281791 205.78483l-30.80868 91.730191 107.688651-53.455469c38.558178 7.53665 69.459978 15.308661 107.924012 15.308661 9.66308 0 19.230993-0.470721 28.752858-1.225921-6.025227-20.36584-9.521864-41.723264-9.521864-63.862493C402.328693 476.632491 517.908058 368.541681 664.250054 368.541681zM498.62897 285.87389c23.200398 0 38.557154 15.120372 38.557154 38.061874 0 22.846334-15.356756 38.156018-38.557154 38.156018-23.107277 0-46.260603-15.309684-46.260603-38.156018C452.368366 300.994262 475.522716 285.87389 498.62897 285.87389zM283.016307 362.090758c-23.107277 0-46.402843-15.309684-46.402843-38.156018 0-22.941502 23.295566-38.061874 46.402843-38.061874 23.081695 0 38.46301 15.120372 38.46301 38.061874C321.479317 346.782098 306.098002 362.090758 283.016307 362.090758zM945.448458 606.151333c0-121.888048-123.258255-221.236753-261.683954-221.236753-146.57838 0-262.015505 99.348706-262.015505 221.236753 0 122.06508 115.437126 221.200938 262.015505 221.200938 30.66644 0 61.617359-7.609305 92.423993-15.262612l84.513836 45.786813-23.178909-76.17082C899.379213 735.776599 945.448458 674.90216 945.448458 606.151333zM598.803483 567.994292c-15.332197 0-30.807656-15.096836-30.807656-30.501688 0-15.190981 15.47546-30.477129 30.807656-30.477129 23.295566 0 38.558178 15.286148 38.558178 30.477129C637.361661 552.897456 622.099049 567.994292 598.803483 567.994292zM768.25071 567.994292c-15.213493 0-30.594809-15.096836-30.594809-30.501688 0-15.190981 15.381315-30.477129 30.594809-30.477129 23.107277 0 38.558178 15.286148 38.558178 30.477129C806.808888 552.897456 791.357987 567.994292 768.25071 567.994292z"
          fill="#ffffff"
          p-id="2832"
        ></path>
      </svg>
    </div> -->

    <div class="share-btn" @click="fastShare">
      <svg
        t="1723522256214"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="5143"
        width="32"
        height="32"
      >
        <path
          d="M146.663314 635.123178c0 98.298793 79.687924 177.979554 177.972391 177.979554 69.648266 0 129.921002-39.997969 159.170163-98.277304L655.223982 745.018078l-0.061398 4.516874c0 70.220295 56.919361 127.129422 127.125329 127.129422 70.206992 0 127.126352-56.908104 127.126352-127.129422 0-70.217225-56.919361-127.122259-127.126352-127.122259-50.91153 0-94.807273 29.883611-115.118877 73.093738l-167.226652-29.435403c1.76418-10.038634 2.671852-20.395516 2.671852-30.947849 0-46.465265-17.820877-88.76465-46.964638-120.445186l154.6318-154.650219c13.953803 5.262864 29.077246 8.129144 44.880163 8.129144 70.205968 0 127.125329-56.905034 127.125329-127.122259s-56.919361-127.125329-127.125329-127.125329-127.125329 56.908104-127.125329 127.125329c0 35.657104 14.686491 67.86976 38.324864 90.962711L415.972946 482.386542c-26.708292-16.012695-57.929364-25.239847-91.337241-25.239847C226.351238 457.150788 146.663314 536.827455 146.663314 635.123178L146.663314 635.123178 146.663314 635.123178z"
          fill="#ffffff"
          p-id="5144"
        ></path>
      </svg>
    </div>
  </div>
</template>

<script lang="ts" setup>
import { ref, watch, onMounted } from "vue";

const fastShare = () => {
  if (navigator.share) {
    navigator
      .share({
        title: "绳网",
        text: "欢迎来到绳网",
        url: window.location.href,
      })
      .then(() => console.log("唤起分享弹窗"))
      .catch((error) => useNuxtApp().$toast.error("分享失败"));
  } else {
    useNuxtApp().$toast.error("该浏览器暂不支持分享功能");
    // TODO 兼容不支持的情况，添加QQ、微信分享，需要用到sdk
    // share(type)
  }
};

const share = (type) => {
  // type: qq，weixin,webo,...
  // TODO 兼容不支持的情况，添加QQ、微信分享，需要用到sdk
};
</script>

<style scoped lang="less">
.share {
  position: fixed;
  // bottom: 48px;
  // left: 40px;
  bottom: 160px;
  right: 40px;
  color: unset;
  background: #222222;
  border-radius: 24px;
  width: 48px;
  min-height: 48px;
  box-shadow:
    inset 0 2px 2px #313431,
    inset 0 -2px 2px #181818,
    0 2px 20px #313431;
  z-index: 50;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 10px;
  cursor: pointer;

  svg {
    height: 24px;
    width: 24px;
  }
  .share-list {
    svg {
      margin: 6px 0;
    }
  }
}
</style>
